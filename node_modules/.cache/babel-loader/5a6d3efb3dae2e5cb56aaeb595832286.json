{"ast":null,"code":"/*\n * Copyright 2020 American Express Travel Related Services Company, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express\n * or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\nimport { IS_LOADING, SET_DATA, DELETE_DATA, ERROR, CLEAR_ERROR, ACTION_NAMESPACE // eslint-disable-next-line import/no-unresolved\n} from 'fetchye-core';\n\nfunction reducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    errors: {},\n    loading: {},\n    data: {}\n  };\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  if (!action.type.startsWith(ACTION_NAMESPACE)) {\n    return state;\n  }\n\n  switch (action.type) {\n    case DELETE_DATA:\n      {\n        const {\n          [action.hash]: deletedEntry,\n          ...nextData\n        } = state.data;\n        return { ...state,\n          data: { ...nextData\n          }\n        };\n      }\n\n    case CLEAR_ERROR:\n      {\n        const {\n          [action.hash]: deletedEntry,\n          ...nextErrors\n        } = state.errors;\n        return { ...state,\n          errors: { ...nextErrors\n          }\n        };\n      }\n\n    case ERROR:\n      {\n        const {\n          [action.hash]: deletedEntry,\n          ...nextLoading\n        } = state.loading;\n        return { ...state,\n          errors: { ...state.errors,\n            [action.hash]: action.error\n          },\n          loading: { ...nextLoading\n          }\n        };\n      }\n\n    case IS_LOADING:\n      {\n        return { ...state,\n          loading: { ...state.loading,\n            [action.hash]: action.hash\n          }\n        };\n      }\n\n    case SET_DATA:\n      {\n        const {\n          [action.hash]: deletedEntry,\n          ...nextLoading\n        } = state.loading;\n        return { ...state,\n          data: { ...state.data,\n            [action.hash]: action.value\n          },\n          loading: { ...nextLoading\n          }\n        };\n      }\n\n    default:\n      return state;\n  }\n}\n\nconst getCacheByKey = function () {\n  let cache = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let key = arguments.length > 1 ? arguments[1] : undefined;\n\n  var _cache$data, _cache$loading, _cache$errors;\n\n  const data = (_cache$data = cache.data) === null || _cache$data === void 0 ? void 0 : _cache$data[key];\n  const loading = !!((_cache$loading = cache.loading) === null || _cache$loading === void 0 ? void 0 : _cache$loading[key]);\n  const error = (_cache$errors = cache.errors) === null || _cache$errors === void 0 ? void 0 : _cache$errors[key];\n  return {\n    data,\n    loading,\n    error\n  };\n};\n\nfunction SimpleCache() {\n  let {\n    cacheSelector = state => state\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    getCacheByKey,\n    reducer,\n    cacheSelector\n  };\n}\n\nexport default SimpleCache;","map":{"version":3,"sources":["/Users/ramchapagai/Desktop/Portfolio/ram-portfolio/node_modules/fetchye/es/SimpleCache.js"],"names":["IS_LOADING","SET_DATA","DELETE_DATA","ERROR","CLEAR_ERROR","ACTION_NAMESPACE","reducer","state","errors","loading","data","action","type","startsWith","hash","deletedEntry","nextData","nextErrors","nextLoading","error","value","getCacheByKey","cache","key","_cache$data","_cache$loading","_cache$errors","SimpleCache","cacheSelector"],"mappings":"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","sourcesContent":["/*\n * Copyright 2020 American Express Travel Related Services Company, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express\n * or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\nimport { IS_LOADING, SET_DATA, DELETE_DATA, ERROR, CLEAR_ERROR, ACTION_NAMESPACE // eslint-disable-next-line import/no-unresolved\n} from 'fetchye-core';\n\nfunction reducer(state = {\n  errors: {},\n  loading: {},\n  data: {}\n}, action) {\n  if (!action.type.startsWith(ACTION_NAMESPACE)) {\n    return state;\n  }\n\n  switch (action.type) {\n    case DELETE_DATA:\n      {\n        const {\n          [action.hash]: deletedEntry,\n          ...nextData\n        } = state.data;\n        return { ...state,\n          data: { ...nextData\n          }\n        };\n      }\n\n    case CLEAR_ERROR:\n      {\n        const {\n          [action.hash]: deletedEntry,\n          ...nextErrors\n        } = state.errors;\n        return { ...state,\n          errors: { ...nextErrors\n          }\n        };\n      }\n\n    case ERROR:\n      {\n        const {\n          [action.hash]: deletedEntry,\n          ...nextLoading\n        } = state.loading;\n        return { ...state,\n          errors: { ...state.errors,\n            [action.hash]: action.error\n          },\n          loading: { ...nextLoading\n          }\n        };\n      }\n\n    case IS_LOADING:\n      {\n        return { ...state,\n          loading: { ...state.loading,\n            [action.hash]: action.hash\n          }\n        };\n      }\n\n    case SET_DATA:\n      {\n        const {\n          [action.hash]: deletedEntry,\n          ...nextLoading\n        } = state.loading;\n        return { ...state,\n          data: { ...state.data,\n            [action.hash]: action.value\n          },\n          loading: { ...nextLoading\n          }\n        };\n      }\n\n    default:\n      return state;\n  }\n}\n\nconst getCacheByKey = (cache = {}, key) => {\n  var _cache$data, _cache$loading, _cache$errors;\n\n  const data = (_cache$data = cache.data) === null || _cache$data === void 0 ? void 0 : _cache$data[key];\n  const loading = !!((_cache$loading = cache.loading) === null || _cache$loading === void 0 ? void 0 : _cache$loading[key]);\n  const error = (_cache$errors = cache.errors) === null || _cache$errors === void 0 ? void 0 : _cache$errors[key];\n  return {\n    data,\n    loading,\n    error\n  };\n};\n\nfunction SimpleCache({\n  cacheSelector = state => state\n} = {}) {\n  return {\n    getCacheByKey,\n    reducer,\n    cacheSelector\n  };\n}\n\nexport default SimpleCache;"]},"metadata":{},"sourceType":"module"}